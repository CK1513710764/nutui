"use strict";(self.webpackChunkNutUI=self.webpackChunkNutUI||[]).push([[727],{"./src/components/Button/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/classnames/index.js")),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);const Button=props=>{const{btnType,className,disabled,size,children,href,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_2___default()("btn",className,{[`btn-${btnType}`]:btnType,[`btn-${size}`]:size,disabled:"link"===btnType&&disabled});return"link"===btnType&&href?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{className:classes,href,...restProps,children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:classes,disabled,...restProps,children})};Button.defaultProps={disabled:!1,btnType:"default"};const __WEBPACK_DEFAULT_EXPORT__=Button;Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1},btnType:{defaultValue:{value:"'default'",computed:!1},required:!1}}}},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/classnames/index.js")),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js");const Icon=props=>{const{className,theme,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_2___default()("viking-icon",className,{[`icon-${theme}`]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.g,{className:classes,...restProps})},__WEBPACK_DEFAULT_EXPORT__=Icon;Icon.__docgenInfo={description:"提供了一套常用的图标集合 基于 react-fontawesome。\n\n支持 react-fontawesome的所有属性 可以在这里查询 https://github.com/FortAwesome/react-fontawesome#basic\n\n支持 fontawesome 所有 free-solid-icons，可以在这里查看所有图标 https://fontawesome.com/icons?d=gallery&s=solid&m=free\n### 引用方法\n\n~~~js\nimport { Icon } from 'vikingship'\n~~~",methods:[],displayName:"Icon",props:{theme:{required:!1,tsType:{name:"union",raw:"| 'primary'\n| 'secondary'\n| 'success'\n| 'info'\n| 'warning'\n| 'danger'\n| 'light'\n| 'dark'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'success'"},{name:"literal",value:"'info'"},{name:"literal",value:"'warning'"},{name:"literal",value:"'danger'"},{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"支持框架主题 根据主题显示不同的颜色"}},composes:["FontAwesomeIconProps"]}},"./src/components/Upload/upload.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ASimpleUpload:()=>ASimpleUpload,BCheckUpload:()=>BCheckUpload,CDragUpload:()=>CDragUpload,__namedExportsOrder:()=>__namedExportsOrder,default:()=>upload_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),axios=__webpack_require__("./node_modules/axios/index.js"),axios_default=__webpack_require__.n(axios),icon=__webpack_require__("./src/components/Icon/icon.tsx");const Progress=props=>{const{percent,strokeHeight,showText,styles,theme}=props;return(0,jsx_runtime.jsx)("div",{className:"viking-progress-bar",style:styles,children:(0,jsx_runtime.jsx)("div",{className:"viking-progress-bar-outer",style:{height:`${strokeHeight}px`},children:(0,jsx_runtime.jsx)("div",{className:`viking-progress-bar-inner color-${theme}`,style:{width:`${percent}%`},children:showText&&(0,jsx_runtime.jsx)("span",{className:"inner-text",children:`${percent}%`})})})})};Progress.defaultProps={strokeHeight:15,showText:!0,theme:"primary"};const progress=Progress;Progress.__docgenInfo={description:"",methods:[],displayName:"Progress",props:{percent:{required:!0,tsType:{name:"number"},description:""},strokeHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"15",computed:!1}},showText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},styles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},theme:{required:!1,tsType:{name:"union",raw:"| 'primary'\n| 'secondary'\n| 'success'\n| 'info'\n| 'warning'\n| 'danger'\n| 'light'\n| 'dark'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'success'"},{name:"literal",value:"'info'"},{name:"literal",value:"'warning'"},{name:"literal",value:"'danger'"},{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"",defaultValue:{value:"'primary'",computed:!1}}}};const UploadList=props=>{const{fileList,onRemove}=props;return console.log("firelist",fileList),(0,jsx_runtime.jsx)("ul",{className:"viking-upload-list",children:fileList.map(item=>(0,jsx_runtime.jsxs)("li",{className:"viking-upload-list-item",children:[(0,jsx_runtime.jsxs)("span",{className:`file-name file-name-${item.status}`,children:[(0,jsx_runtime.jsx)(icon.A,{icon:"file-alt",theme:"secondary"}),item.name]}),(0,jsx_runtime.jsxs)("span",{className:"file-status",children:[("uploading"===item.status||"ready"===item.status)&&(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0,theme:"primary"}),"success"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"check-circle",theme:"success"}),"error"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"times-circle",theme:"danger"})]}),(0,jsx_runtime.jsx)("span",{className:"file-actions",children:(0,jsx_runtime.jsx)(icon.A,{icon:"times",onClick:()=>{onRemove(item)}})}),"uploading"===item.status&&(0,jsx_runtime.jsx)(progress,{percent:item.percent||0})]},item.uid))})},uploadList=UploadList;UploadList.__docgenInfo={description:"",methods:[],displayName:"UploadList",props:{fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(_file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"_file"}],return:{name:"void"}}},description:""}}};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);const Dragger=props=>{const{onFile,children}=props,[dragOver,setDragOver]=(0,react.useState)(!1),klass=classnames_default()("viking-uploader-dragger",{"is-dragover":dragOver}),handleDrag=(e,over)=>{e.preventDefault(),setDragOver(over)};return(0,jsx_runtime.jsx)("div",{className:klass,onDragOver:e=>{handleDrag(e,!0)},onDragLeave:e=>{handleDrag(e,!1)},onDrop:e=>{e.preventDefault(),setDragOver(!1),console.log("inside drag",e.dataTransfer.files),onFile(e.dataTransfer.files)},children})},dragger=Dragger;Dragger.__docgenInfo={description:"",methods:[],displayName:"Dragger",props:{onFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: FileList) => void",signature:{arguments:[{type:{name:"FileList"},name:"files"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""}}};const Upload=props=>{const{action,defaultFileList,beforeUpload,onProgress,onSuccess,onError,onChange,onRemove,name,headers,data,withCredentials,accept,multiple,children,drag}=props,fileInput=(0,react.useRef)(null),[fileList,setFileList]=(0,react.useState)(defaultFileList||[]),updateFileList=(updateFile,updateObj)=>{setFileList(prevList=>prevList.map(file=>file.uid===updateFile.uid?{...file,...updateObj}:file))},uploadFiles=(files,test)=>{let postFiles=Array.from(files);test&&console.log("drag",postFiles[0]),postFiles.forEach(file=>{if(beforeUpload){const result=beforeUpload(file);result&&result instanceof Promise?result.then(processedFile=>{post(processedFile)}):!1!==result&&post(file)}else post(file)})},post=file=>{let _file={uid:Date.now()+"upload-file",status:"ready",name:file.name,size:file.size,percent:0,raw:file};setFileList(prevList=>[_file,...prevList]);const formData=new FormData;formData.append(name||"file",file),data&&Object.keys(data).forEach(key=>{formData.append(key,data[key])}),axios_default().post(action,formData,{headers:{...headers,"Content-Type":"multipart/form-data"},withCredentials,onUploadProgress:e=>{let percentage=Math.round(100*e.loaded/e.total)||0;percentage<100&&(updateFileList(_file,{percent:percentage,status:"uploading"}),_file.status="uploading",_file.percent=percentage,onProgress&&onProgress(percentage,_file))}}).then(resp=>{updateFileList(_file,{status:"success",response:resp.data}),_file.status="success",_file.response=resp.data,onSuccess&&onSuccess(resp.data,_file),onChange&&onChange(_file)}).catch(err=>{updateFileList(_file,{status:"error",error:err}),_file.status="error",_file.error=err,onError&&onError(err,_file),onChange&&onChange(_file)})};return(0,jsx_runtime.jsxs)("div",{className:"viking-upload-component",children:[(0,jsx_runtime.jsxs)("div",{className:"viking-upload-input",style:{display:"inline-block"},onClick:()=>{fileInput.current&&fileInput.current.click()},children:[drag?(0,jsx_runtime.jsx)(dragger,{onFile:files=>{uploadFiles(files,!0)},children}):children,(0,jsx_runtime.jsx)("input",{className:"viking-file-input",style:{display:"none"},ref:fileInput,onChange:e=>{const files=e.target.files;files&&(uploadFiles(files),fileInput.current&&(fileInput.current.value=""))},type:"file",accept,multiple})]}),(0,jsx_runtime.jsx)(uploadList,{fileList,onRemove:file=>{setFileList(prevList=>prevList.filter(item=>item.uid!==file.uid)),onRemove&&onRemove(file)}})]})};Upload.defaultProps={name:"file"};Upload.__docgenInfo={description:"通过点击或者拖拽上传文件\n### 引用方法\n\n~~~js\nimport { Upload } from 'vikingship'\n~~~",methods:[],displayName:"Upload",props:{action:{required:!0,tsType:{name:"string"},description:""},defaultFileList:{required:!1,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},beforeUpload:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => boolean | Promise<File>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"union",raw:"boolean | Promise<File>",elements:[{name:"boolean"},{name:"Promise",elements:[{name:"File"}],raw:"Promise<File>"}]}}},description:""},onProgress:{required:!1,tsType:{name:"signature",type:"function",raw:"(percentage: number, file: UploadFile) => void",signature:{arguments:[{type:{name:"number"},name:"percentage"},{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: any, file: UploadFile) => void",signature:{arguments:[{type:{name:"any"},name:"data"},{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(err: any, file: UploadFile) => void",signature:{arguments:[{type:{name:"any"},name:"err"},{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""},onRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""},headers:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:""},name:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'file'",computed:!1}},data:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:""},withCredentials:{required:!1,tsType:{name:"boolean"},description:""},accept:{required:!1,tsType:{name:"string"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:""},drag:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var Button_button=__webpack_require__("./src/components/Button/button.tsx");const upload_stories={title:"Upload",id:"Upload",component:Upload,parameters:{docs:{source:{type:"code"}}}},ASimpleUpload={name:"普通的 Upload 组件",args:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},render:args=>(0,jsx_runtime.jsx)(Upload,{...args,children:(0,jsx_runtime.jsxs)(Button_button.A,{size:"lg",btnType:"primary",children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload"})," 点击上传"," "]})})},BCheckUpload={name:"上传前检查文件大小",args:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},render:args=>(0,jsx_runtime.jsx)(Upload,{...args,beforeUpload:file=>!(Math.round(file.size/1024)>50)||(alert("file too big"),!1),children:(0,jsx_runtime.jsxs)(Button_button.A,{size:"lg",btnType:"primary",children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload"})," 不能传大于50Kb！"," "]})})},CDragUpload={name:"拖动上传",args:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",name:"fileName",multiple:!0,drag:!0},render:args=>(0,jsx_runtime.jsxs)(Upload,{...args,children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload",size:"5x",theme:"secondary"}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("p",{children:"点击或者拖动到此区域进行上传"})]})},__namedExportsOrder=["ASimpleUpload","BCheckUpload","CDragUpload"];ASimpleUpload.parameters={...ASimpleUpload.parameters,docs:{...ASimpleUpload.parameters?.docs,source:{originalSource:"{\n  name: '普通的 Upload 组件',\n  args: {\n    action: 'https://www.mocky.io/v2/5cc8019d300000980a055e76'\n  },\n  render: args => <Upload {...args}>\r\n      <Button size=\"lg\" btnType=\"primary\">\r\n        <Icon icon=\"upload\" /> 点击上传{' '}\r\n      </Button>\r\n    </Upload>\n}",...ASimpleUpload.parameters?.docs?.source}}},BCheckUpload.parameters={...BCheckUpload.parameters,docs:{...BCheckUpload.parameters?.docs,source:{originalSource:"{\n  name: '上传前检查文件大小',\n  args: {\n    action: 'https://www.mocky.io/v2/5cc8019d300000980a055e76'\n  },\n  render: args => {\n    const checkFileSize = (file: File) => {\n      if (Math.round(file.size / 1024) > 50) {\n        alert('file too big');\n        return false;\n      }\n      return true;\n    };\n    return <Upload {...args} beforeUpload={checkFileSize}>\r\n        <Button size=\"lg\" btnType=\"primary\">\r\n          <Icon icon=\"upload\" /> 不能传大于50Kb！{' '}\r\n        </Button>\r\n      </Upload>;\n  }\n}",...BCheckUpload.parameters?.docs?.source}}},CDragUpload.parameters={...CDragUpload.parameters,docs:{...CDragUpload.parameters?.docs,source:{originalSource:"{\n  name: '拖动上传',\n  args: {\n    action: 'https://www.mocky.io/v2/5cc8019d300000980a055e76',\n    name: 'fileName',\n    multiple: true,\n    drag: true\n  },\n  render: args => <Upload {...args}>\r\n      <Icon icon=\"upload\" size=\"5x\" theme=\"secondary\" />\r\n      <br />\r\n      <p>点击或者拖动到此区域进行上传</p>\r\n    </Upload>\n}",...CDragUpload.parameters?.docs?.source}}}}}]);